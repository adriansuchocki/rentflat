<!--
 - Created by BRITENET on 14.10.2019.
 -->

<aura:component description="RF_Flat_Search_Result_Item_Card" controller="RF_Flat_Controller">
    <aura:attribute name="flat" type="Object" />
    <aura:attribute name="follow" type="Boolean" default="false"/>
    <aura:registerEvent name="showSpinner" type="c:RF_Flat_Spinner_Show_Event"/>
    <aura:registerEvent name="hideSpinner" type="c:RF_Flat_Spinner_Hide_Event"/>
    <div class="c-container-card" onclick="{! c.showFlat }">
        <lightning:layout multipleRows="true" horizontalAlign="center" verticalAlign="center">
            <lightning:layoutItem size="12" padding="around-small">
                <center>
                    <aura:if isTrue="{! empty(v.flat.photos) }" >
                        <img src="{! $Resource.NoPhoto }" style="height: 200px;"/>
                        <aura:set attribute="else">
                            <img  src="{! v.flat.photos[0] }" style="height: 200px;"/>
                        </aura:set>
                    </aura:if>
                </center>
            </lightning:layoutItem>
            <lightning:layoutItem size="12" padding="around-small">
                <p class="slds-text-heading--label" ><h1 class="slds-text-heading_medium">{! v.flat.product.Name }</h1></p>
            </lightning:layoutItem>
            <lightning:layoutItem size="12" padding="horizontal-small">
                <lightning:layout horizontalAlign="center" multipleRows="true">
                    <lightning:layoutItem size="12">
                        <p class="slds-text-heading--label" ><h5 class="slds-text-heading_medium">{! $Label.c.LABEL_COMMENTS_RATING }: {! v.flat.rating }&nbsp;<lightning:icon iconName="custom:custom11" variant="warning" size="small" alternativeText="star" class="ratingStar"/></h5></p>
                    </lightning:layoutItem>
                    <lightning:layoutItem size="12">
                        <p class="slds-text-heading--label" ><h6 class="slds-text-heading_small">{! v.flat.numberOfRating }&nbsp;{! $Label.c.LABEL_COMMENTS_NUMBER_OF_RATING_END }</h6></p>
                    </lightning:layoutItem>
                </lightning:layout>
            </lightning:layoutItem>
            <lightning:layoutItem size="12" padding="around-small">
                <lightning:layout horizontalAlign="center" multipleRows="true">
                    <lightning:layoutItem size="6">
                        <p class="slds-text-heading--label" ><h5 class="slds-text-heading_medium">{! $Label.c.LABEL_PRODUCT_SIZE }: {! v.flat.product.Size__c }</h5></p>
                    </lightning:layoutItem>
                    <lightning:layoutItem size="6">
                        <p class="slds-text-heading--label" ><h5 class="slds-text-heading_medium">{! $Label.c.LABEL_PRODUCT_ROOMS }: {! v.flat.product.Rooms__c }</h5></p>
                    </lightning:layoutItem>
                    <lightning:layoutItem size="6">
                        <p class="slds-text-heading--label" ><h5 class="slds-text-heading_medium">{! $Label.c.LABEL_PRODUCT_BEDROOMS }: {! v.flat.product.Bedrooms__c }</h5></p>
                    </lightning:layoutItem>
                    <lightning:layoutItem size="6">
                        <p class="slds-text-heading--label" ><h5 class="slds-text-heading_medium">{! $Label.c.LABEL_PRODUCT_BATHROOMS }: {! v.flat.product.Baths__c }</h5></p>
                    </lightning:layoutItem>
                </lightning:layout>
            </lightning:layoutItem>
            <lightning:layoutItem size="6">&nbsp;</lightning:layoutItem>
            <lightning:layoutItem size="6">
                <div style="padding-top: 10px; padding-bottom: 10px">
                    <aura:if isTrue="{! v.follow }">
                        <lightning:button label="{! $Label.c.BTN_STOP_FOLLOW }" variant="brand" iconName="utility:preview" iconPosition="left" onclick="{! c.handleRemoveFollow }"/>
                        <aura:set attribute="else">
                            <lightning:button label="{! $Label.c.BTN_FOLLOW }" iconName="utility:preview" iconPosition="left" onclick="{! c.handleAddFollow }"/>
                        </aura:set>
                    </aura:if>
                </div>
            </lightning:layoutItem>
            <lightning:layoutItem size="12" padding="around-small">
            </lightning:layoutItem>
            <lightning:layoutItem size="12" padding="around-small" class="custom-box">
                <aura:if isTrue="{! v.flat.priceBookEntryValue.UnitPrice == v.flat.standardValue }">
                                        <h2><lightning:formattedNumber value="{! v.flat.priceBookEntryValue.UnitPrice }" style="currency" currencyCode="{! $Locale.currencyCode }" currencyDisplayAs="symbol"/></h2>
                    <aura:set attribute="else">
                        <h2><lightning:formattedNumber value="{! v.flat.standardValue }" style="currency" currencyCode="{! $Locale.currencyCode }" currencyDisplayAs="symbol"/></h2>
                        <b style="text-decoration: line-through;"><h4><lightning:formattedNumber value="{! v.flat.priceBookEntryValue.UnitPrice }" style="currency" currencyCode="{! $Locale.currencyCode }" currencyDisplayAs="symbol"/></h4></b>
                    </aura:set>
                </aura:if>
                <div style="background-color: white; height: 1px; width 100%; position: relative; transform: skewY(-10deg); margin-top: 5vh;">
                    &nbsp;
                </div>
                <div style="float: right;" >
                    <h3>{! $Label.c.LABEL_PRODUCT_PRICE_PER_DAY }</h3>
                </div>
            </lightning:layoutItem>
        </lightning:layout>
    </div>
    <c:RF_Toast aura:id="RFToast"/>
</aura:component>